### 1、选取片段

我们从各个类型的音乐中分别找出来一些4小节的小段，每个片段都满足最短时值为8分音符的要求。总共找了 个段，作为初始种群

### 2、初始化

我们以钢琴为音高范围（A0 ～ C8），将音符转化成数字

其中

0代表休止符

20代表延长一个8分音符

21 ～ 108 分别对应 A0 ～ C8

将一个4小节的旋律片段转化成长度为32位的向量进行存储

### 3. 遗传算法

关于music21用法的备注
1. stream是一个list list[0]是key（调号）1及往后都是音符note。note分note.Note和note.Rest两种。for n in stream.notes不会遍历休止符。
2. interval是音程
3. transpose转调
4. 必须把音符按出现顺序append。否则会bug（offset不对）
5. 写了倒影 逆行 移调 交叉 音高的随机变化 没有写节奏的随机变化，我感觉节奏是可以通过倒影 逆行 移调 交叉实现的。但是音与音之间的音程关系很难有随机变化。



#### 一些备注

music.txt放的是旋律，tone.txt放的是调号，name.txt放的是每一行对应歌曲的名字

函数都在相应地方写好注释了，应该可以很快上手！

# 頑張ってください！

## 12-15
目前一共有29条数据，修改了一些代码逻辑，现在能成功跑出来。下面列举一下问题和潜在问题：
1. 遗传算法部分每次只返回了最优结果，但是实际上原有数据本身就是最优的，所以返回结果永远是已有数据，所以现在遗传算法函数返回的是list(stream)，从list里面再人为筛掉原有数据就可以得到生成结果
2. 适应性函数的参数后续我再调整下，除了现在项目里文件夹的四个result，后面的result的音符非常密集（全是八分音符），而且音程不太对，听起来很怪，后续再调一下系数惩罚一下这两项，我觉得效果会更好
    这里可以听一下rank8和它的祖先（尾浦由纪的M01，附上网址：https://www.bilibili.com/video/BV1jL411h7Zm/?spm_id_from=333.337.search-card.all.click&vd_source=1e0e4c36b4454ecde3a7e2f4430e98cc
    很明显的问题就是中间音符时长，然后开头的旋律却基本没变。

**另外！！！！！剩下两个结果其实我也不知生成效果好不好，因为这也可能是@lwn同学搜集的数据但是我没听过，我就误认为是生成的（我比对了一下旋律，好像没有雷同的）**
3. 关于调号，generic_algs.py中的小调是Fm（举例），但是music.txt和music2.txt都是标记为f，这里我没太注意程序中有没有考虑这部分

# rainy rainy rainy blues~
